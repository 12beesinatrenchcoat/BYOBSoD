(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const m of t.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();let i,d,a=0,f,c=0,l=0,u=!1;const p={"bg-color":"#0078d7",emoticon:":(","big-message":"Your PC ran into a problem and needs to restart. We're just collecting some error info, and then we'll restart for you.","more-info":"For more information about this issue and possible fixes, visit https://windows.com/stopcode","support-info":"If you call a support person, give them this info:","stop-code":"INVALID_DATA_ACCESS_TRAP"},y=["emoticon","big-message","more-info","support-info","stop-code"];document.getElementsByName("bg-color").forEach(o=>{o.addEventListener("change",()=>{document.querySelector("meta[name='theme-color']").setAttribute("content",o.value),document.querySelector("main").style.setProperty("background-color",o.value)})});document.querySelector("#form").addEventListener("submit",o=>{o.preventDefault();const r=new FormData(o.target);console.log(r);for(const t of y)console.log(t,r.get(t)),document.getElementById(t).textContent=r.get(t)||p[t];i=Date.now();const n=Number(r.get("duration"))*1e3||3e4;d=i+n,document.querySelector("#progress-percentage").textContent=0,a=0,c=Math.min(10,Math.floor(n/200)),l=0,console.group("BSOD at "+i),console.log("Blue screening for "+n+"ms");const s=r.get("bg-color")||p["bg-color"];document.querySelector("meta[name='theme-color']").setAttribute("content",s),document.querySelector("main").style.setProperty("background-color",s),document.body.style.setProperty("background-color",s);const e=document.querySelector("main");try{(e.requestFullscreen||e.webkitRequestFullscreen).call(e,{navigationUI:"hide"}),u=!0}catch(t){u=!1,console.error(t)}e.style.setProperty("display","flex"),h()});function g(){clearInterval(f),document.querySelector("main").style.setProperty("display","none"),document.body.style.removeProperty("background-color"),console.log("BSOD cancelled."),console.groupEnd(1)}document.addEventListener("keydown",o=>{o.key==="Escape"&&g()});document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(g(),u=!1)});document.addEventListener("webkitfullscreenchange",()=>{document.webkitFullscreenElement||(g(),u=!1)});function h(){f=setInterval(()=>{const o=Date.now();if(o>=d&&(a=100,document.querySelector("#progress-percentage").textContent="100",console.log("BSOD done!"),clearInterval(f),setTimeout(()=>{document.querySelector("main").style.setProperty("display","none"),document.body.style.removeProperty("background-color"),u&&(document.exitFullscreen||document.webkitExitFullscreen).call(document)},1e3)),l>=1)l--;else if(c>=1){c--;return}const r=(o-i)/(d-i),n=r**2;a=Math.min(100,Math.max(100*(n/(2*(n-r)+1)+(Math.random()*.1-.08)),a)),Math.random()*r>.6?(l=Math.round(Math.random()*10)+1,console.log("zooming "+l)):(c=Math.round(Math.random()*(Math.min((d-o)/100-10,75)+10)),console.log("waiting "+c+" intervals")),document.querySelector("#progress-percentage").textContent=a.toFixed(0),console.log(c,l,r)},100)}(/iPad/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&document.querySelector("#ios-warning").style.setProperty("display","block");
